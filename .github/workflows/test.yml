name: Test

on: [push, pull_request]

jobs:
  test:
    strategy:
      matrix:
        python:
          - "3.9"
          - "3.10"
          - "3.11"
          - "3.12"
          - "3.13"
        platform: [ubuntu-latest, macos-latest, windows-latest]
    runs-on: ${{ matrix.platform }}
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Install uv and set the python version
        uses: astral-sh/setup-uv@v6
        with:
          python-version: ${{ matrix.python-version }}
          enable-cache: true

      - name: Install the project
        run: uv sync --locked --all-extras --dev

      - name: Run tests
        run: uv run pytest tests
      # - name: Install uv
      #   uses: astral-sh/setup-uv@v6

      # - name: Set up Python
      #   run: uv python install

      # - name: Set up Python ${{ matrix.python }}
      #   uses: actions/setup-python@v5
      #   with:
      #     python-version: ${{ matrix.python }}
      # - name: Install test dependencies
      #   run: python -m pip install --upgrade hatch
      # - name: Test
      #   run: hatch test --python=${{ matrix.python }}
